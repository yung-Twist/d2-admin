(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37a98914"],{"29dd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d2-container",[a("template",{slot:"header"},[a("div",{staticClass:"pageHeader"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("客服设置")])],1)]),a("el-table",{attrs:{data:t.dataList,border:""}},[a("el-table-column",{attrs:{prop:"wechat_name",label:"微信名"}}),a("el-table-column",{attrs:{label:"头像",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"8vw",height:"8vw"},attrs:{src:t.row.image_path,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}})],1),a("el-dialog",{attrs:{title:t.edittitle,visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"微信名",prop:"wechat_name"}},[a("el-input",{model:{value:t.ruleForm.wechat_name,callback:function(e){t.$set(t.ruleForm,"wechat_name",e)},expression:"ruleForm.wechat_name"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1),a("el-form-item",{attrs:{label:"微信二维码",prop:"image_id"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.action,"show-file-list":!1,"on-success":t.handleSuccess,data:t.uploadOtherParmas,name:"settings_image"}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("建议上传宽高为1:1的图片")])])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],2)},r=[],s=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("333d")),o=a("61f7"),l=a("c276"),n={wechat_name:"",phone:"",image_id:""},u={name:"Server",data:function(){return{listQuery:{limit:10,page:1},action:"",imageUrl:"",uploadOtherParmas:{isUploadImage:1,token:l["a"].cookies.get("token")},dataList:[],ruleForm:Object.assign({},n),rules:{wechat_name:[{required:!0,message:"请输入微信昵称",trigger:"blur"}],phone:[{validator:o["a"].validatePhone,trigger:"blur"}],image_id:[{required:!0,message:"请上传图片",trigger:"blur"}]},edittitle:"",dialogVisible:!1}},components:{Pagination:s["a"]},mounted:function(){this.getdata()},methods:{getdata:function(){var t=this;this.$axios.post("/v1/admin/settings/getCustomerService",this.listQuery).then((function(e){t.dataList=[],t.dataList.push(e.data)}))},handleAdd:function(){this.dialogVisible=!0,this.action=window.apiObj.ApiUrl+"/v1/admin/settings/setCustomerService",this.ruleForm=this.dataList[0],this.imageUrl=this.dataList[0].image_path},handleSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.ruleForm.image_id=t.data.image_id},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.$axios.post("/v1/admin/settings/setCustomerService",e.ruleForm).then((function(t){e.$message.success("设置成功"),e.getdata(),e.dialogVisible=!1}))}))},handleDel:function(t){var e=this;this.$store.dispatch("mystore/mystore/DELETEROWDATA",{data:{productId:t.productId},url:"/v1/admin/product/del"}).then((function(t){e.getdata()}))}}},c=u,d=(a("d01e"),a("2877")),m=function(t){t.options.__source="src/views/server/server.vue"},p=m,h=Object(d["a"])(c,i,r,!1,null,"05398a28",null);"function"===typeof p&&p(h);e["default"]=h.exports},"61f7":function(t,e,a){"use strict";e["a"]={validatePhone:function(t,e,a){var i=/^[1][3-9][0-9]{9}$/;if(!e)return a(new Error("请输入手机号码"));i.test(e)?a():a(new Error("手机号码格式错误"))}}},"9ea8":function(t,e,a){},d01e:function(t,e,a){"use strict";var i=a("9ea8"),r=a.n(i);r.a}}]);